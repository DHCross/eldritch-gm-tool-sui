(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16],{2121:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(5155),l=a(2115),r=a(2619),s=a.n(r);let i=["Easy","Moderate","Difficult","Demanding","Formidable","Deadly"],o=["Practitioner","Competent","Proficient","Advanced","Elite"],c={1:{Practitioner:[7,10,12,14,16,18],Competent:[14,20,24,28,32,36],Proficient:[21,29,36,42,48,55],Advanced:[28,39,48,56,64,73],Elite:[35,49,60,70,80,110]},2:{Practitioner:[14,20,24,28,32,36],Competent:[28,39,48,56,64,73],Proficient:[42,59,72,84,96,108],Advanced:[56,77,96,112,128,144],Elite:[70,95,120,140,160,190]},3:{Practitioner:[21,30,36,42,48,54],Competent:[42,59,72,84,96,108],Proficient:[63,84,108,126,144,162],Advanced:[84,111,144,168,192,216],Elite:[105,140,180,210,240,270]},4:{Practitioner:[28,42,50,56,64,72],Competent:[56,77,96,112,128,144],Proficient:[84,111,144,168,192,216],Advanced:[112,147,180,224,256,288],Elite:[140,185,228,280,320,360]}},d={Minor:["1d4","1d6","1d8","1d10","1d12"],Standard:["2d4","2d6","2d8","2d10","2d12"],Exceptional:["3d4","3d6","3d8","3d10","3d12"],Legendary:["3d12","3d14","3d16","3d18","3d20"]},u={Minuscule:{Mundane:.5,Magical:1,Preternatural:1.5,Supernatural:2},Tiny:{Mundane:.5,Magical:1,Preternatural:1.5,Supernatural:2},Small:{Mundane:1,Magical:1.5,Preternatural:2,Supernatural:2.5},Medium:{Mundane:1,Magical:1.5,Preternatural:2,Supernatural:2.5},Large:{Mundane:1.5,Magical:2,Preternatural:2.5,Supernatural:3},Huge:{Mundane:2,Magical:2.5,Preternatural:3,Supernatural:3.5},Gargantuan:{Mundane:2.5,Magical:3,Preternatural:3.5,Supernatural:4}},m=Object.keys(u),h=["Mundane","Magical","Preternatural","Supernatural"];function p(){let[e,t]=(0,l.useState)(4),[a,r]=(0,l.useState)(0),[p,x]=(0,l.useState)(1),[g,b]=(0,l.useState)(10),[M,v]=(0,l.useState)(20),[y,j]=(0,l.useState)(30),[P,N]=(0,l.useState)({Minor:!0,Standard:!0,Exceptional:!0,Legendary:!1}),[S,w]=(0,l.useState)(""),[C,E]=(0,l.useState)(""),k=o[a],D=i[p],T=(0,l.useCallback)(e=>{N(t=>({...t,[e]:!t[e]}))},[]),O=(0,l.useCallback)(()=>{let t=Object.keys(P).filter(e=>P[e]);if(!t.length)return void w("Please select at least one creature type.");let a=c[e][k][p],n=a,l=[];for(;n>0;){let e=function(e,t,a,n){let l,r,s=e[Math.floor(Math.random()*e.length)],i=d[s],o=i[Math.floor(Math.random()*i.length)],[c,p]=o.split("d").map(Number),f=c*p,x="Medium";if(100*Math.random()<t){let e=m.filter(e=>"Medium"!==e);x=e[Math.floor(Math.random()*e.length)]}let g="Mundane";if(100*Math.random()<a){let e=h.filter(e=>"Mundane"!==e);g=e[Math.floor(Math.random()*e.length)]}let b="Normal";100*Math.random()<n&&(b=.5>Math.random()?"Fast":"Tough");let{hitPoints:M,multiplier:v}=function(e,t,a){let n=u[t][a];return{hitPoints:Math.round(e*n),multiplier:n}}(f,x,g);"Fast"===b?(l=Math.round(.75*M),r=M-l):"Tough"===b?(r=Math.round(.75*M),l=M-r):(l=Math.round(M/2),r=M-l);let y=p>=12?1:p>=10?2:p>=8?3:p>=6?4:5,j="d".concat(4*(["Minor","Standard","Exceptional","Legendary"].indexOf(s)+1));return{category:s,threatDice:o,threatMV:f,size:x,nature:g,creatureType:b,hitPoints:M,multiplier:v,activeDefense:l,passiveDefense:r,savingThrow:j,battlePhase:y}}(t,g,M,y);if(l.push(e),n-=e.threatMV,0===e.threatMV||l.length>100)break}let r=[];r.push("Eldritch RPG Encounter"),r.push("========================="),r.push("Party Size: ".concat(e)),r.push("Defense Level: ".concat(k)),r.push("Difficulty: ".concat(D)),r.push("Total Threat Score: ".concat(a)),r.push(""),r.push("Creatures:"),r.push("========================="),l.forEach((e,t)=>{r.push("Monster ".concat(t+1)),r.push("Type: ".concat(e.category," | TD: ").concat(e.threatDice," | HP: ").concat(e.hitPoints," (").concat(e.activeDefense,"/").concat(e.passiveDefense,") [").concat(e.size,", ").concat(e.nature,"; \xd7").concat(e.multiplier,"] ").concat(e.creatureType)),r.push("ST: ".concat(e.savingThrow," | BP: ").concat(e.battlePhase)),r.push("")}),w(r.join("\n"))},[P,e,k,p,D,g,M,y]),A=(0,l.useMemo)(()=>Object.values(P).filter(Boolean).length,[P]),V=(0,l.useCallback)(()=>{let e=(()=>{try{let e=window.localStorage.getItem("eldritch_party_defense");if(!e)return null;return JSON.parse(e)}catch(e){return console.error("Unable to read stored party defense",e),null}})();if(!e)return void E("No party defense found. Select PCs in the roster first and try again.");E("Imported: Active Defense ".concat(e.totalAD,", Passive Defense ").concat(e.totalPD,", Total ").concat(e.total," → Tier: ").concat(e.tier).concat(e.range?" (".concat(e.range,")"):""));let t=o.indexOf(e.tier);-1!==t&&r(t)},[]);return(0,n.jsx)("div",{className:"min-h-screen bg-slate-950 text-slate-100",children:(0,n.jsxs)("div",{className:"mx-auto flex max-w-4xl flex-col gap-6 px-4 py-10 sm:px-6 lg:px-8",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between gap-4",children:[(0,n.jsx)(s(),{href:"/",className:"inline-flex items-center gap-2 rounded-md bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-400",children:"← Back to Home"}),(0,n.jsx)("button",{type:"button",onClick:V,className:"inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400",children:"Import Party Defense"})]}),C&&(0,n.jsx)("div",{className:"rounded-lg border border-slate-700 bg-slate-900/70 p-4 text-sm text-slate-200 shadow-inner",children:C}),(0,n.jsx)("h1",{className:"text-center text-3xl font-bold tracking-tight text-emerald-400 sm:text-4xl",children:"Eldritch RPG Encounter Generator"}),(0,n.jsxs)("section",{className:"space-y-6",children:[(0,n.jsx)(f,{label:"Party Size",value:e,min:1,max:4,onChange:t,displayValue:String(e)}),(0,n.jsx)(f,{label:"Party Defense Level",value:a,min:0,max:o.length-1,onChange:r,displayValue:k}),(0,n.jsx)(f,{label:"Desired Difficulty",value:p,min:0,max:i.length-1,onChange:x,displayValue:D}),(0,n.jsx)(f,{label:"Non-Medium Size Percentage",value:g,min:0,max:100,onChange:b,displayValue:"".concat(g,"%")}),(0,n.jsx)(f,{label:"Non-Mundane Nature Percentage",value:M,min:0,max:100,onChange:v,displayValue:"".concat(M,"%")}),(0,n.jsx)(f,{label:"Fast/Tough Creature Percentage",value:y,min:0,max:100,onChange:j,displayValue:"".concat(y,"%")})]}),(0,n.jsxs)("section",{className:"rounded-lg border border-slate-700 bg-slate-900/70 p-4 shadow",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-emerald-300",children:"Creature Pool"}),(0,n.jsxs)("p",{className:"mt-1 text-sm text-slate-300",children:["Select the threat categories to include. Currently enabled: ",A,"."]}),(0,n.jsx)("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:Object.keys(P).map(e=>(0,n.jsxs)("label",{className:"flex items-center gap-3 rounded-md border border-slate-700/70 bg-slate-800/70 px-4 py-3 text-sm shadow-sm",children:[(0,n.jsx)("input",{type:"checkbox",checked:P[e],onChange:()=>T(e),className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-emerald-500 focus:ring-emerald-500"}),(0,n.jsx)("span",{className:"font-medium text-slate-200",children:e})]},e))})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,n.jsx)("button",{type:"button",onClick:O,className:"inline-flex items-center justify-center rounded-md bg-emerald-600 px-5 py-3 text-base font-semibold text-white shadow hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-400",children:"Generate Encounter"}),(0,n.jsx)("span",{className:"text-sm text-slate-400",children:"Tips: adjust sliders, then regenerate for new results."})]}),(0,n.jsx)("pre",{className:"min-h-[12rem] whitespace-pre-wrap rounded-lg border border-emerald-700/50 bg-slate-900/80 p-6 text-sm text-slate-100 shadow-inner",children:S||"Encounter details will appear here. Adjust settings and generate to begin."})]})})}function f(e){let{label:t,value:a,displayValue:l,min:r,max:s,onChange:i}=e;return(0,n.jsxs)("label",{className:"block rounded-lg border border-slate-700 bg-slate-900/70 p-4 shadow",children:[(0,n.jsxs)("span",{className:"flex items-center justify-between text-sm font-medium text-emerald-300",children:[t,(0,n.jsx)("span",{className:"text-slate-100",children:l})]}),(0,n.jsx)("input",{type:"range",value:a,min:r,max:s,onChange:e=>i(Number(e.target.value)),className:"mt-4 h-2 w-full cursor-pointer appearance-none rounded-full bg-slate-700 accent-emerald-500"})]})}},2925:(e,t,a)=>{Promise.resolve().then(a.bind(a,2121))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=2925)),_N_E=e.O()}]);